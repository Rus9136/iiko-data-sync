# IIKO Data Sync - Веб-интерфейс

## Обзор

Полнофункциональный веб-интерфейс для управления синхронизацией данных из IIKO API с боковой панелью навигации, AJAX поддержкой и экспортом отчетов. Приложение разделено на три основных раздела: Справочники, Документы и Сервис.

### Основные возможности:

#### Дашборд
- **Главная страница** - статистика по всем сущностям, виджеты, последние синхронизации

#### Справочники
1. **Номенклатура** - продукты с AJAX пагинацией, поиском, фильтрами
2. **Склады** - иерархическая структура складов с типами
3. **Поставщики** - управление контрагентами, фильтрация по ролям
4. **Подразделения** - организационная структура с ИНН
5. **Счета** - финансовые счета с иерархией

#### Документы
1. **Продажи** - чеки с группировкой, детальный просмотр позиций
2. **Списания** - документы списания с фильтрацией по статусам
3. **Приходные накладные** - полный CRUD, связь с поставщиками, НДС

#### Сервис
1. **Загрузка данных** - универсальная страница синхронизации всех сущностей
2. **История синхронизаций** - логи всех операций с деталями
3. **Оперативная сводка** - аналитика продаж с OLAP
4. **Отчеты по продажам** - экспорт в Excel через pandas
5. **Цены** - управление ценовыми листами

### Установка и запуск:

```bash
# Установка зависимостей
pip install -r requirements.txt

# Запуск веб-сервера с автооткрытием браузера
python run_web.py
```

Веб-сервер запустится на http://127.0.0.1:8082 и автоматически откроется в браузере

### Структура веб-приложения:

```
web/
├── app.py                    # Основное Flask приложение с AJAX
├── report_controller.py      # Контроллер отчетов
├── static/
│   └── style.css            # Кастомные стили с боковой панелью
├── templates/
│   ├── base.html            # Базовый шаблон с сайдбаром
│   ├── dashboard.html       # Дашборд с виджетами
│   ├── index.html           # Главная страница
│   ├── *_content.html       # AJAX шаблоны контента
│   ├── products.html        # Номенклатура
│   ├── stores.html          # Склады
│   ├── suppliers/list.html  # Поставщики
│   ├── departments.html     # Подразделения
│   ├── accounts.html        # Счета
│   ├── sales.html           # Продажи
│   ├── writeoffs.html       # Списания
│   ├── incoming_invoices.html # Приходные накладные
│   ├── upload.html          # Универсальная синхронизация
│   ├── logs.html            # История
│   ├── operational-summary.html # Оперативная сводка
│   ├── sales_report.html    # Отчеты по продажам
│   ├── 404.html             # Страница 404
│   └── 500.html             # Страница 500
└── README.md                # Документация
```

### Технологии:

- **Backend**: Flask 3.0.0 (Python) с flask-cors
- **Frontend**: Bootstrap 5, jQuery, AJAX
- **База данных**: PostgreSQL с psycopg2-binary
- **ORM**: SQLAlchemy 2.0.23
- **Отчеты**: pandas 2.1.1, xlsxwriter 3.1.9
- **HTTP-запросы**: requests 2.31.0

### Основные функции:

1. **Dashboard** - виджеты с реальными данными, быстрые ссылки
2. **Боковая панель** - организованная навигация по разделам
3. **AJAX навигация** - переходы без перезагрузки страниц
4. **Таблицы с пагинацией** - поиск, фильтры, сортировка
5. **Продажи с группировкой** - чеки с детальными позициями
6. **Excel экспорт** - отчеты по продажам с pandas
7. **Приходные накладные** - полный CRUD для документов
8. **Универсальная синхронизация** - все сущности на одной странице

### Особенности:

- **Безопасность**: валидация данных, обработка ошибок, логирование
- **Производительность**: AJAX загрузка, пагинация, кеширование
- **macOS совместимость**: использование 127.0.0.1 вместо 0.0.0.0
- **Обработка больших чисел**: Numeric(15,9) для финансовых данных

### Реализованные возможности (декабрь 2025):

✓ **Экспорт в Excel** - отчеты по продажам через pandas
✓ **Полный CRUD** - для приходных накладных
✓ **API endpoints** - для оперативных отчетов
✓ **Боковая навигация** - с группировкой по разделам
✓ **Множественная синхронизация** - все сущности

### Планы развития:

- Графики и аналитика (charts.js)
- Управление пользователями и авторизация
- Автоматическая синхронизация по расписанию
- WebSocket для real-time обновлений
- REST API для внешних интеграций

Проект активно развивается и готов к масштабированию!
